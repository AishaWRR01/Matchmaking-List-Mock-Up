<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rosie - Candidate Search</title>
    <script>
        // Define functions immediately in head to ensure they're available
        var savedLists = {
            'favorites': [],
            'seniordevelopers': [],
            'q1candidates': []
        };
        var currentList = 'favorites';
        var currentCandidateForNewList = null;

        function addToList(candidateName, candidateEmail, listKey) {
            console.log('addToList called:', candidateName, listKey);
            var candidate = { name: candidateName, email: candidateEmail };
            
            if (!savedLists[listKey]) {
                savedLists[listKey] = [];
            }
            
            var existingIndex = -1;
            for (var i = 0; i < savedLists[listKey].length; i++) {
                if (savedLists[listKey][i].name === candidateName) {
                    existingIndex = i;
                    break;
                }
            }
            
            if (existingIndex >= 0) {
                alert(candidateName + ' is already in this list!');
                return;
            }
            
            savedLists[listKey].push(candidate);
            alert(candidateName + ' added to ' + getListDisplayName(listKey) + '!');
            
            updateListDisplay();
        }

        function createNewListFor(candidateName, candidateEmail) {
            console.log('createNewListFor called:', candidateName);
            currentCandidateForNewList = { name: candidateName, email: candidateEmail };
            var modal = document.getElementById('candidateNewListModal');
            if (modal) {
                modal.style.display = 'flex';
                var nameSpan = document.getElementById('candidateForNewList');
                if (nameSpan) nameSpan.textContent = candidateName;
                var input = document.getElementById('candidateNewListName');
                if (input) input.focus();
            }
        }

        function getListDisplayName(listKey) {
            var displayNames = {
                'favorites': 'Favorites',
                'seniordevelopers': 'Senior Developers',
                'q1candidates': 'Q1 Candidates'
            };
            return displayNames[listKey] || listKey.charAt(0).toUpperCase() + listKey.slice(1);
        }

        function updateListDisplay() {
            // Simple update function
            console.log('Updating lists:', savedLists);
        }

        function toggleDropdown() {
            var dropdown = document.getElementById('savedDropdown');
            if (dropdown) {
                dropdown.classList.toggle('show');
            }
        }

        function hideCandidateNewListModal() {
            var modal = document.getElementById('candidateNewListModal');
            if (modal) modal.style.display = 'none';
        }

        function updateCandidateDropdowns() {
            // Update Cynthia's dropdown
            updateCandidateDropdown('cynthia', 'Cynthia', 'cynthia.test1@gmail.com');
            // Update Marcus's dropdown  
            updateCandidateDropdown('marcus', 'Marcus', 'marcus.test2@gmail.com');
        }

        function deleteListFromDropdown(listKey) {
            event.stopPropagation(); // Prevent triggering the add to list function
            
            console.log('Attempting to delete list:', listKey);
            
            if (confirm('Are you sure you want to delete "' + getListDisplayName(listKey) + '" and all its candidates?')) {
                console.log('User confirmed deletion of:', listKey);
                
                // Remove the list from savedLists
                delete savedLists[listKey];
                console.log('List deleted from savedLists:', Object.keys(savedLists));
                
                // Remove tab from main dropdown
                var tabToRemove = document.querySelector('[data-list="' + listKey + '"]');
                if (tabToRemove) {
                    tabToRemove.remove();
                    console.log('Tab removed from main dropdown');
                } else {
                    console.log('Tab not found for removal');
                }
                
                // Switch to favorites if current list was deleted
                if (currentList === listKey) {
                    console.log('Switching to favorites since current list was deleted');
                    switchList('favorites');
                }
                
                // Update everything
                updateListDisplay();
                updateCandidateDropdowns();
                updateCheckboxStates();
                
                console.log('All displays updated after deletion');
                alert('List "' + getListDisplayName(listKey) + '" has been deleted!');
            } else {
                console.log('User cancelled deletion');
            }
        }

        function updateCandidateDropdown(candidateId, candidateName, candidateEmail) {
            var optionsContainer = document.getElementById(candidateId + '-options');
            if (!optionsContainer) return;

            var html = '';
            var listIcons = {
                'favorites': 'üìù',
                'seniordevelopers': 'üë®‚Äçüíª',
                'q1candidates': 'üìÖ'
            };
            var defaultLists = ['favorites', 'seniordevelopers', 'q1candidates'];

            Object.keys(savedLists).forEach(function(listKey) {
                var listDisplayName = getListDisplayName(listKey);
                var icon = listIcons[listKey] || 'üìã';
                
                // Check if candidate is already in this list
                var isInList = savedLists[listKey].some(function(c) { return c.name === candidateName; });
                var checkmark = isInList ? ' ‚úì' : '';
                
                html += '<div class="dropdown-option">';
                html += '<span class="list-option-content" onclick="addToList(\'' + candidateName + '\', \'' + candidateEmail + '\', \'' + listKey + '\')">';
                html += icon + ' ' + listDisplayName + checkmark;
                html += '</span>';
                
                // Add delete button for custom lists (not default lists)
                if (!defaultLists.includes(listKey)) {
                    html += '<span class="delete-list-option" onclick="deleteListFromDropdown(\'' + listKey + '\'); return false;" title="Delete list">√ó</span>';
                }
                
                html += '</div>';
            });

            optionsContainer.innerHTML = html;
            console.log('Updated dropdown for', candidateName, 'with lists:', Object.keys(savedLists));
        }

        function addNewListTab(listKey, listName) {
            var tabsContainer = document.getElementById('listTabs');
            if (tabsContainer) {
                var newTab = document.createElement('div');
                newTab.className = 'nav-tab';
                newTab.setAttribute('data-list', listKey);
                newTab.onclick = function() { switchList(listKey); };
                newTab.innerHTML = listName + ' (<span id="' + listKey + 'Count">1</span>) <span class="delete-list-btn" onclick="deleteList(\'' + listKey + '\')" title="Delete list">√ó</span>';
                tabsContainer.appendChild(newTab);
                console.log('Added new tab for list:', listKey);
            }
        }

        function updateCheckboxStates() {
            // Check Cynthia's status
            var cynthiaInAnyList = Object.values(savedLists).some(function(list) {
                return list.some(function(c) { return c.name === 'Cynthia'; });
            });
            var cynthiaCheckbox = document.getElementById('cynthia-checkbox');
            if (cynthiaCheckbox) {
                cynthiaCheckbox.checked = cynthiaInAnyList;
            }
            
            // Check Marcus's status
            var marcusInAnyList = Object.values(savedLists).some(function(list) {
                return list.some(function(c) { return c.name === 'Marcus'; });
            });
            var marcusCheckbox = document.getElementById('marcus-checkbox');
            if (marcusCheckbox) {
                marcusCheckbox.checked = marcusInAnyList;
            }
        }

        function createListForCandidate() {
            var listName = document.getElementById('candidateNewListName').value.trim();
            if (!listName || !currentCandidateForNewList) return;

            var listKey = listName.toLowerCase().replace(/[^a-z0-9]/g, '');
            
            if (savedLists[listKey]) {
                alert('A list with this name already exists');
                return;
            }
            
            // Create the new list with the candidate
            savedLists[listKey] = [currentCandidateForNewList];
            
            // Add the new tab to the main dropdown
            addNewListTab(listKey, listName);
            
            // Update all displays AND candidate dropdowns
            updateListDisplay();
            updateCandidateDropdowns();
            
            alert(currentCandidateForNewList.name + ' added to new list: ' + listName + '!');
            hideCandidateNewListModal();
        }

        function addToList(candidateName, candidateEmail, listKey) {
            console.log('addToList called:', candidateName, listKey);
            var candidate = { name: candidateName, email: candidateEmail };
            
            if (!savedLists[listKey]) {
                savedLists[listKey] = [];
            }
            
            var existingIndex = -1;
            for (var i = 0; i < savedLists[listKey].length; i++) {
                if (savedLists[listKey][i].name === candidateName) {
                    existingIndex = i;
                    break;
                }
            }
            
            if (existingIndex >= 0) {
                alert(candidateName + ' is already in this list!');
                return;
            }
            
            savedLists[listKey].push(candidate);
            alert(candidateName + ' added to ' + getListDisplayName(listKey) + '!');
            
            // Update everything including candidate dropdowns
            updateListDisplay();
            updateCandidateDropdowns();
        }

        function removeSaved(candidateName) {
            savedLists[currentList] = savedLists[currentList].filter(function(c) { return c.name !== candidateName; });
            
            // Update everything including candidate dropdowns
            updateListDisplay();
            updateCandidateDropdowns();
            
            // Check if candidate exists in any other list
            var existsInOtherLists = Object.keys(savedLists).some(function(listKey) {
                return listKey !== currentList && savedLists[listKey].some(function(c) { return c.name === candidateName; });
            });
            
            // Update checkbox if candidate doesn't exist in any list
            if (!existsInOtherLists) {
                var checkbox = document.getElementById(candidateName.toLowerCase() + '-checkbox');
                if (checkbox) {
                    checkbox.checked = false;
                }
            }
        }

        function deleteList(listKey) {
            if (listKey === 'favorites') {
                alert('Cannot delete the default Favorites list');
                return;
            }

            if (confirm('Are you sure you want to delete this list and all its candidates?')) {
                delete savedLists[listKey];
                
                // Remove tab
                var tabToRemove = document.querySelector('[data-list="' + listKey + '"]');
                if (tabToRemove) {
                    tabToRemove.remove();
                }
                
                // Switch to favorites if current list was deleted
                if (currentList === listKey) {
                    switchList('favorites');
                }
                
                // Update everything including candidate dropdowns
                updateListDisplay();
                updateCandidateDropdowns();
            }
        }

        // Initialize candidate dropdowns when page loads
        function initializeDropdowns() {
            updateCandidateDropdowns();
        }

        // Call initialization
        setTimeout(initializeDropdowns, 100);

        function addNewListTab(listKey, listName) {
            var tabsContainer = document.getElementById('listTabs');
            if (tabsContainer) {
                var newTab = document.createElement('div');
                newTab.className = 'nav-tab';
                newTab.setAttribute('data-list', listKey);
                newTab.onclick = function() { switchList(listKey); };
                newTab.innerHTML = listName + ' (<span id="' + listKey + 'Count">1</span>) <span class="delete-list-btn" onclick="deleteList(\'' + listKey + '\')" title="Delete list">√ó</span>';
                tabsContainer.appendChild(newTab);
            }
        }

        function updateListDisplay() {
            var savedList = document.getElementById('savedList');
            var listStats = document.getElementById('listStats');
            
            if (!savedList || !listStats) return;
            
            // Update list tabs counts
            Object.keys(savedLists).forEach(function(listName) {
                var countElement = document.getElementById(listName + 'Count');
                if (countElement) {
                    countElement.textContent = savedLists[listName].length;
                }
            });

            // Update current list display
            var candidates = savedLists[currentList] || [];
            listStats.textContent = candidates.length + ' candidates in current list';

            // Update candidate list with horizontal grid layout
            if (candidates.length === 0) {
                savedList.innerHTML = '<div class="empty-state">No saved candidates yet</div>';
            } else {
                var html = '<div class="candidates-grid">';
                candidates.forEach(function(candidate) {
                    html += '<div class="saved-candidate">';
                    html += '<span class="remove-btn" onclick="removeSaved(\'' + candidate.name + '\')" title="Remove candidate">√ó</span>';
                    html += '<div class="candidate-card-name">' + candidate.name + '</div>';
                    html += '<div class="candidate-card-email">' + candidate.email + '</div>';
                    html += '</div>';
                });
                html += '</div>';
                savedList.innerHTML = html;
            }
        }

        function switchList(listName) {
            currentList = listName;
            var tabs = document.querySelectorAll('.nav-tab');
            for (var i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            var activeTab = document.querySelector('[data-list="' + listName + '"]');
            if (activeTab) {
                activeTab.classList.add('active');
            }
            updateListDisplay();
        }

        function removeSaved(candidateName) {
            savedLists[currentList] = savedLists[currentList].filter(function(c) { return c.name !== candidateName; });
            updateListDisplay();
            
            // Check if candidate exists in any other list
            var existsInOtherLists = Object.keys(savedLists).some(function(listKey) {
                return listKey !== currentList && savedLists[listKey].some(function(c) { return c.name === candidateName; });
            });
            
            // Update checkbox if candidate doesn't exist in any list
            if (!existsInOtherLists) {
                var checkbox = document.getElementById(candidateName.toLowerCase() + '-checkbox');
                if (checkbox) {
                    checkbox.checked = false;
                }
            }
        }

        function deleteList(listKey) {
            if (listKey === 'favorites') {
                alert('Cannot delete the default Favorites list');
                return;
            }

            if (confirm('Are you sure you want to delete this list and all its candidates?')) {
                delete savedLists[listKey];
                
                // Remove tab
                var tabToRemove = document.querySelector('[data-list="' + listKey + '"]');
                if (tabToRemove) {
                    tabToRemove.remove();
                }
                
                // Switch to favorites if current list was deleted
                if (currentList === listKey) {
                    switchList('favorites');
                }
                
                updateListDisplay();
            }
        }

        console.log('Functions defined in head!');
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }

        .header {
            background: white;
            padding: 16px 24px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: bold;
        }

        .we-are {
            background: #dc3545;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .rosie {
            color: #dc3545;
        }

        .user-menu {
            position: relative;
        }

        .user-name {
            color: #6c757d;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .user-name:hover {
            background-color: #f8f9fa;
        }

        .dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-width: 400px;
            max-height: 500px;
            z-index: 1000;
            display: none;
            overflow: hidden;
        }

        .dropdown.show {
            display: block;
        }

        .dropdown-header {
            padding: 16px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dropdown-title {
            font-weight: 600;
            font-size: 16px;
        }

        .new-list-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .new-list-btn:hover {
            background: #0056b3;
        }

        .dropdown-nav {
            padding: 12px 16px;
            border-bottom: 1px solid #e9ecef;
            background: #f8f9fa;
        }

        .nav-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            overflow-x: auto;
        }

        .nav-tab {
            padding: 6px 12px;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-tab.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        .nav-tab:hover:not(.active) {
            background: #f8f9fa;
        }

        .delete-list-btn {
            color: #dc3545;
            font-size: 10px;
            cursor: pointer;
        }

        .search-box {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            font-size: 12px;
        }

        .dropdown-content {
            max-height: 300px;
            overflow-y: auto;
            padding: 16px;
        }

        .candidates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
        }

        .saved-candidate {
            padding: 12px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: white;
            transition: all 0.2s;
            position: relative;
        }

        .saved-candidate:hover {
            border-color: #007bff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .candidate-card-name {
            font-weight: 500;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .candidate-card-email {
            font-size: 11px;
            color: #6c757d;
            margin-bottom: 8px;
            word-break: break-all;
        }

        .remove-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            color: #dc3545;
            cursor: pointer;
            font-size: 14px;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(220, 53, 69, 0.1);
        }

        .remove-btn:hover {
            background: rgba(220, 53, 69, 0.2);
        }

        .checkbox-wrapper {
            position: relative;
            display: block;
            margin-bottom: 8px;
        }

        .save-checkbox {
            transform: scale(1.5);
            cursor: pointer;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 250px;
            z-index: 1000;
            display: none;
            margin-top: 5px;
        }

        .save-checkbox:checked + .dropdown-menu {
            display: block;
        }

        .dropdown-header {
            padding: 12px 16px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            font-weight: 600;
            font-size: 14px;
            color: #333;
        }

        .dropdown-option {
            padding: 10px 16px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 14px;
            border-bottom: 1px solid #f8f9fa;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dropdown-option:hover {
            background-color: #f8f9fa;
        }

        .dropdown-option:last-child {
            border-bottom: none;
        }

        .list-option-content {
            flex: 1;
        }

        .delete-list-option {
            color: #dc3545;
            font-size: 12px;
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 3px;
            margin-left: 8px;
        }

        .delete-list-option:hover {
            background-color: rgba(220, 53, 69, 0.1);
        }

        .dropdown-divider {
            height: 1px;
            background-color: #e9ecef;
            margin: 4px 0;
        }

        .dropdown-option.create-new {
            color: #007bff;
            font-weight: 500;
            border-top: 1px solid #e9ecef;
        }

        .dropdown-option.create-new:hover {
            background-color: #e3f2fd;
        }

        .list-stats {
            padding: 8px 16px;
            background: #f8f9fa;
            font-size: 12px;
            color: #6c757d;
            border-bottom: 1px solid #e9ecef;
        }

        .empty-state {
            padding: 20px;
            text-align: center;
            color: #6c757d;
            font-style: italic;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 24px;
            border-radius: 8px;
            width: 400px;
        }

        .modal-header {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 16px;
        }

        .modal-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .modal-buttons {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }

        .btn-primary-small {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }

        .delete-list-btn {
            color: #dc3545;
            font-size: 10px;
            cursor: pointer;
            margin-left: 8px;
        }

        .delete-list-btn:hover {
            color: #a71e2a;
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            gap: 24px;
            padding: 24px;
        }

        .sidebar {
            width: 360px;
            background: white;
            border-radius: 12px;
            padding: 24px;
            height: fit-content;
        }

        .search-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .search-icon {
            width: 24px;
            height: 24px;
            color: #6c757d;
        }

        .search-title {
            font-size: 20px;
            font-weight: 600;
        }

        .search-subtitle {
            color: #6c757d;
            font-size: 14px;
            margin-bottom: 24px;
        }

        .tabs {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            border-bottom: 1px solid #e9ecef;
        }

        .tab {
            padding: 8px 0;
            color: #6c757d;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }

        .tab.active {
            color: #007bff;
            border-bottom-color: #007bff;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .required {
            color: #dc3545;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
        }

        .skill-tag {
            background: #f8f9fa;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 8px;
            display: inline-block;
        }

        .btn-primary {
            background: #1a1a1a;
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 8px;
            width: 100%;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .search-criteria {
            margin-top: 24px;
        }

        .criteria-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .main-content {
            flex: 1;
        }

        .results-header {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .total-matches {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .matches-count {
            font-size: 32px;
            font-weight: bold;
        }

        .match-summary {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 16px;
        }

        .summary-title {
            font-weight: 600;
            margin-bottom: 12px;
        }

        .skills-row {
            display: flex;
            gap: 32px;
            margin-bottom: 16px;
        }

        .skill-category h4 {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 8px;
        }

        .skill-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .skill-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .technical {
            background: #e3f2fd;
            color: #1976d2;
        }

        .non-technical {
            background: #e8f5e8;
            color: #388e3c;
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 4px;
        }

        .stat-value {
            font-weight: 600;
        }

        .candidate-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 16px;
            position: relative;
        }

        .candidate-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .candidate-info {
            flex: 1;
        }

        .candidate-name {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .save-checkbox {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .match-score {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #007bff;
            font-weight: 600;
        }

        .location, .position {
            color: #6c757d;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-badges {
            display: flex;
            gap: 8px;
            margin: 12px 0;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .available {
            background: #e8f5e8;
            color: #388e3c;
        }

        .links {
            display: flex;
            gap: 16px;
            margin: 12px 0;
        }

        .link {
            color: #007bff;
            text-decoration: none;
            font-size: 14px;
        }

        .candidate-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin: 20px 0;
        }

        .detail-section h4 {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 8px;
        }

        .rate {
            font-weight: 600;
        }

        .project-types, .work-types {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .type-tag {
            background: #f8f9fa;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .profile-summary {
            margin-top: 20px;
        }

        .profile-summary h4 {
            margin-bottom: 12px;
            font-size: 16px;
        }

        .profile-text {
            line-height: 1.6;
            color: #555;
        }

        .empty-state {
            padding: 20px;
            text-align: center;
            color: #6c757d;
            font-style: italic;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <span class="we-are">we are</span>
            <span class="logo-text"><span class="rosie">rosie</span></span>
        </div>
        <div class="user-menu">
            <span class="user-name" onclick="toggleDropdown()">Welcome, aisha</span>
            <div class="dropdown" id="savedDropdown">
                <div class="dropdown-header">
                    <span class="dropdown-title">Saved Lists</span>
                    <button class="new-list-btn" onclick="showNewListModal()">+ New List</button>
                </div>
                
                <div class="dropdown-nav">
                    <div class="nav-tabs" id="listTabs">
                        <div class="nav-tab active" data-list="favorites">
                            Favorites (<span id="favoritesCount">0</span>)
                            <span class="delete-list-btn" onclick="deleteList('favorites')" title="Delete list">√ó</span>
                        </div>
                    </div>
                    <input type="text" class="search-box" placeholder="Search candidates in current list..." id="searchInput" oninput="searchCandidates()">
                </div>

                <div class="list-stats" id="listStats">
                    0 candidates in current list
                </div>

                <div class="dropdown-content" id="savedList">
                    <div class="empty-state">No saved candidates yet</div>
                </div>
            </div>
        </div>

        <!-- Modal for creating new lists -->
        <div class="modal" id="newListModal">
            <div class="modal-content">
                <div class="modal-header">Create New List</div>
                <input type="text" class="modal-input" id="newListName" placeholder="Enter list name...">
                <div class="modal-buttons">
                    <button class="btn-secondary" onclick="hideNewListModal()">Cancel</button>
                    <button class="btn-primary-small" onclick="createNewList()">Create List</button>
                </div>
            </div>
        </div>

        <!-- Modal for creating new list from candidate dropdown -->
        <div class="modal" id="candidateNewListModal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">Create New List for <span id="candidateForNewList"></span></div>
                <input type="text" class="modal-input" id="candidateNewListName" placeholder="Enter list name...">
                <div class="modal-buttons">
                    <button class="btn-secondary" onclick="hideCandidateNewListModal()">Cancel</button>
                    <button class="btn-primary-small" onclick="createListForCandidate()">Create & Add</button>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <aside class="sidebar">
            <div class="search-header">
                <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <h2 class="search-title">Candidate Search</h2>
            </div>
            <p class="search-subtitle">Find the best candidates using multiple search methods</p>

            <div class="tabs">
                <div class="tab active">By Job Desc...</div>
                <div class="tab">By Candidate</div>
                <div class="tab">By Filters</div>
            </div>

            <div class="form-group">
                <label class="form-label">Job Description <span class="required">*</span></label>
                <textarea class="form-control" rows="4" placeholder="CRM Strategist, Salesforce"></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">Skills & Tools</label>
                <div class="skill-tag">CRM Strategist</div>
                <input class="form-control" placeholder="Enter both technical skills and tools, each on a new line. The system will automatically categorize them.">
            </div>

            <button class="btn-primary">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                Find Candidates
            </button>

            <div class="search-criteria">
                <div class="criteria-header">
                    <h3>Search Criteria</h3>
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                    </svg>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <div class="results-header">
                <div class="total-matches">
                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <div>
                        <h3>Total Matches</h3>
                        <div class="matches-count">7 candidates</div>
                    </div>
                </div>

                <div class="match-summary">
                    <h4 class="summary-title">Match Summary</h4>
                    <div class="skills-row">
                        <div class="skill-category">
                            <h4>Technical Skills</h4>
                            <div class="skill-badges">
                                <span class="skill-badge technical">CRM Strategist</span>
                                <span class="skill-badge technical">CRM strategy</span>
                                <span class="skill-badge technical">Salesforce</span>
                            </div>
                        </div>
                        <div class="skill-category">
                            <h4>Non-Technical Skills</h4>
                            <div class="skill-badges">
                                <!-- Empty for this example -->
                            </div>
                        </div>
                        <div class="skill-category">
                            <h4>Required Tools</h4>
                            <div class="skill-badges">
                                <span class="skill-badge non-technical">CRM Strategist</span>
                                <span class="skill-badge non-technical">General</span>
                                <span class="skill-badge non-technical">Salesforce</span>
                                <span class="skill-badge non-technical">CRM</span>
                            </div>
                        </div>
                    </div>

                    <div class="stats-row">
                        <div class="stat">
                            <div class="stat-label">Experience Required</div>
                            <div class="stat-value">0+ years</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Experience Level</div>
                            <div class="stat-value">Entry</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Total Matches</div>
                            <div class="stat-value">7 candidates</div>
                        </div>
                        <div class="stat">
                            <div class="stat-label">Best Match Score</div>
                            <div class="stat-value">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Candidate Cards -->
            <div class="candidate-card">
                <div class="candidate-header">
                    <div class="candidate-info">
                        <h3 class="candidate-name">
                            Cynthia
                            <span style="color: #dc3545;">üìç</span>
                        </h3>
                        <div class="email" style="color: #6c757d; font-size: 14px; margin-bottom: 8px;">‚úâÔ∏è cynthia.test1@gmail.com</div>
                        <div class="location">üìç United States, Texas, Austin</div>
                        <div class="position">üè¢ Demand Generation Operations, Enterprise at Udacity</div>
                    </div>
                    <div class="match-score">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" class="save-checkbox" id="cynthia-checkbox">
                            <div class="dropdown-menu" id="cynthia-dropdown">
                                <div class="dropdown-header">Add Cynthia to List</div>
                                <div class="dropdown-options" id="cynthia-options">
                                    <!-- Options will be dynamically generated -->
                                </div>
                                <div class="dropdown-divider"></div>
                                <div class="dropdown-option create-new" onclick="createNewListFor('Cynthia', 'cynthia.test1@gmail.com')">‚ûï Create New List</div>
                            </div>
                        </div>
                        üìä 100.0% Match ‚úì
                    </div>
                </div>

                <div class="status-badges">
                    <span class="status-badge">Portal</span>
                    <span class="status-badge available">üåü Available</span>
                </div>

                <div class="links">
                    <a href="#" class="link">LinkedIn Link</a>
                    <a href="#" class="link">Portfolio Link</a>
                </div>

                <div class="candidate-details">
                    <div class="detail-section">
                        <h4>üí∞ Rate Range</h4>
                        <div class="rate">$70 - $85 /hr</div>
                    </div>
                    <div class="detail-section">
                        <h4>üìã Project Types</h4>
                        <div class="project-types">
                            <span class="type-tag">Short term</span>
                            <span class="type-tag">Long term</span>
                            <span class="type-tag">Short term team</span>
                            <span class="type-tag">Long term team</span>
                            <span class="type-tag">Full-Time Equivalent</span>
                            <span class="type-tag">Open to All work types</span>
                        </div>
                    </div>
                    <div class="detail-section">
                        <h4>üíº Work Types</h4>
                        <div class="work-types">
                            <span class="type-tag">Remote</span>
                            <span class="type-tag">Hybrid</span>
                            <span class="type-tag">In Office</span>
                        </div>
                    </div>
                </div>

                <div class="profile-summary">
                    <h4>üë§ Profile Summary</h4>
                    <p class="profile-text">
                        Cynthia Caridad is a Demand Generation and Lifecycle Marketing expert with 8+ years of experience 
                        driving significant revenue growth in B2B and B2C companies. Her key achievements include 
                        generating over $30MM in pipeline for Udacity, building a lifecycle marketing program generating over 
                        $2MM in annual revenue at The Zebra, and implementing cost-saving marketing automation...
                    </p>
                </div>
            </div>

            <!-- Additional candidate cards would go here -->
            <div class="candidate-card">
                <div class="candidate-header">
                    <div class="candidate-info">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" class="save-checkbox" id="marcus-checkbox">
                            <div class="dropdown-menu" id="marcus-dropdown">
                                <div class="dropdown-header">Add Marcus to List</div>
                                <div class="dropdown-options" id="marcus-options">
                                    <!-- Options will be dynamically generated -->
                                </div>
                                <div class="dropdown-divider"></div>
                                <div class="dropdown-option create-new" onclick="createNewListFor('Marcus', 'marcus.test2@gmail.com')">‚ûï Create New List</div>
                            </div>
                        </div>
                        <h3 class="candidate-name">
                            Marcus
                            <span style="color: #dc3545;">üìç</span>
                        </h3>
                        <div class="email" style="color: #6c757d; font-size: 14px; margin-bottom: 8px;">‚úâÔ∏è marcus.test2@gmail.com</div>
                        <div class="location">üìç United States, California, San Francisco</div>
                        <div class="position">üè¢ CRM Specialist at TechCorp</div>
                    </div>
                    <div class="match-score">
                        üìä 85.2% Match ‚úì
                    </div>
                </div>

                <div class="status-badges">
                    <span class="status-badge">Portal</span>
                    <span class="status-badge available">üåü Available</span>
                </div>

                <div class="candidate-details">
                    <div class="detail-section">
                        <h4>üí∞ Rate Range</h4>
                        <div class="rate">$65 - $80 /hr</div>
                    </div>
                    <div class="detail-section">
                        <h4>üìã Project Types</h4>
                        <div class="project-types">
                            <span class="type-tag">Long term</span>
                            <span class="type-tag">Full-Time Equivalent</span>
                        </div>
                    </div>
                    <div class="detail-section">
                        <h4>üíº Work Types</h4>
                        <div class="work-types">
                            <span class="type-tag">Remote</span>
                            <span class="type-tag">Hybrid</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Store multiple saved lists
        let savedLists = {
            'favorites': []
        };
        let currentList = 'favorites';
        let filteredCandidates = [];

        function toggleDropdown() {
            const dropdown = document.getElementById('savedDropdown');
            dropdown.classList.toggle('show');
            updateListDisplay();
        }

        function toggleSave(checkbox, candidateName, candidateEmail) {
            // For now, always save to the current active list
            if (checkbox.checked) {
                const existing = savedLists[currentList].find(c => c.name === candidateName);
                if (!existing) {
                    savedLists[currentList].push({ name: candidateName, email: candidateEmail });
                }
            } else {
                // Remove from all lists that contain this candidate
                Object.keys(savedLists).forEach(listName => {
                    savedLists[listName] = savedLists[listName].filter(c => c.name !== candidateName);
                });
            }
            updateListDisplay();
        }

        function removeSaved(candidateName) {
            savedLists[currentList] = savedLists[currentList].filter(c => c.name !== candidateName);
            
            // Also uncheck the checkbox if it exists
            const checkboxes = document.querySelectorAll('.save-checkbox');
            checkboxes.forEach(checkbox => {
                const card = checkbox.closest('.candidate-card');
                const nameElement = card.querySelector('.candidate-name');
                if (nameElement && nameElement.textContent.trim().startsWith(candidateName)) {
                    checkbox.checked = false;
                }
            });
            updateListDisplay();
        }

        function switchList(listName) {
            currentList = listName;
            
            // Update active tab
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-list="${listName}"]`).classList.add('active');
            
            // Clear search
            document.getElementById('searchInput').value = '';
            
            updateListDisplay();
        }

        function updateListDisplay() {
            const savedList = document.getElementById('savedList');
            const listStats = document.getElementById('listStats');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            // Update list tabs counts
            Object.keys(savedLists).forEach(listName => {
                const countElement = document.getElementById(`${listName}Count`);
                if (countElement) {
                    countElement.textContent = savedLists[listName].length;
                }
            });

            // Filter candidates based on search
            const candidates = savedLists[currentList] || [];
            filteredCandidates = candidates.filter(candidate => 
                candidate.name.toLowerCase().includes(searchTerm) || 
                candidate.email.toLowerCase().includes(searchTerm)
            );

            // Update stats
            if (searchTerm) {
                listStats.textContent = `${filteredCandidates.length} of ${candidates.length} candidates (filtered)`;
            } else {
                listStats.textContent = `${candidates.length} candidates in current list`;
            }

            // Update candidate list
            if (filteredCandidates.length === 0) {
                if (searchTerm) {
                    savedList.innerHTML = '<div class="empty-state">No candidates match your search</div>';
                } else {
                    savedList.innerHTML = '<div class="empty-state">No saved candidates yet</div>';
                }
            } else {
                savedList.innerHTML = filteredCandidates.map(candidate => `
                    <div class="saved-candidate">
                        <div>
                            <div style="font-weight: 500;">${candidate.name}</div>
                            <div style="font-size: 12px; color: #6c757d;">${candidate.email}</div>
                        </div>
                        <span class="remove-btn" onclick="removeSaved('${candidate.name}')">Remove</span>
                    </div>
                `).join('');
            }
        }

        function searchCandidates() {
            updateListDisplay();
        }

        function showNewListModal() {
            document.getElementById('newListModal').classList.add('show');
            document.getElementById('newListName').focus();
        }

        function hideNewListModal() {
            document.getElementById('newListModal').classList.remove('show');
            document.getElementById('newListName').value = '';
        }

        function createNewList() {
            const listName = document.getElementById('newListName').value.trim();
            if (!listName) return;

            // Create safe key for the list
            const listKey = listName.toLowerCase().replace(/[^a-z0-9]/g, '');
            if (savedLists[listKey]) {
                alert('A list with this name already exists');
                return;
            }

            // Add new list
            savedLists[listKey] = [];

            // Add tab
            const tabsContainer = document.getElementById('listTabs');
            const newTab = document.createElement('div');
            newTab.className = 'nav-tab';
            newTab.setAttribute('data-list', listKey);
            newTab.onclick = () => switchList(listKey);
            newTab.innerHTML = `
                ${listName} (<span id="${listKey}Count">0</span>)
                <span class="delete-list-btn" onclick="deleteList('${listKey}')" title="Delete list">√ó</span>
            `;
            tabsContainer.appendChild(newTab);

            hideNewListModal();
            switchList(listKey);
        }

        function deleteList(listKey) {
            if (listKey === 'favorites') {
                alert('Cannot delete the default Favorites list');
                return;
            }

            if (confirm('Are you sure you want to delete this list and all its candidates?')) {
                delete savedLists[listKey];
                
                // Remove tab
                document.querySelector(`[data-list="${listKey}"]`).remove();
                
                // Switch to favorites if current list was deleted
                if (currentList === listKey) {
                    switchList('favorites');
                }
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.querySelector('.user-menu');
            const modal = document.getElementById('newListModal');
            
            if (!userMenu.contains(event.target)) {
                document.getElementById('savedDropdown').classList.remove('show');
            }
            
            if (event.target === modal) {
                hideNewListModal();
            }
        });

        // Handle Enter key in new list modal
        document.getElementById('newListName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                createNewList();
            }
        });

        // Initialize display
        updateListDisplay();
    </script>
</body>
</html>
